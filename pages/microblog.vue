<script setup lang="ts">
import { Breadcrumb, MastoToot } from "@/types";

const breadcrumbs: Breadcrumb[] = [
  {
    title: "–ú–∏–∫—Ä–æ–±–ª–æ–≥",
    url: null,
  },
];

const toots: Ref<MastoToot[]> = ref([]);

async function fetchAllToots() {
  const endPoint = `https://fosstodon.org/api/v1/accounts/109570713393752841/statuses`;

  // Reference: https://nuxt.com/docs/api/utils/dollarfetch
  return await $fetch<MastoToot[]>(endPoint, {
    method: "GET",
  });
}

onMounted(async () => {
  toots.value = await fetchAllToots();
});
</script>

<template>
  <Title> –ú–∏–∫—Ä–æ–±–ª–æ–≥ | Hazadus.ru </Title>

  <Breadcrumbs :breadcrumbs="breadcrumbs" />

  <h1 class="text-4xl font-bold mt-8">–ú–∏–∫—Ä–æ–±–ª–æ–≥ <Icon name="logos:mastodon-icon" /></h1>

  <p class="text-base text-gray-900 p-4">
    –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–≤–µ–∂–∏–µ —Å—Ç–∞—Ç—É—Å—ã –∏–∑ –º–æ–µ–π –ª–µ–Ω—Ç—ã –Ω–∞ –ú–∞—Å—Ç–æ–¥–æ–Ω–µ. –≠—Ç–æ –ª—é–±–æ–ø—ã—Ç–Ω–∞—è –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è
    —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç —Ä–µ–∫–ª–∞–º—ã –∏ –Ω–∞–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∑–∞—Ç–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –±–æ–ª—å—à–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
    —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ï—Å–ª–∏ –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª—ã—à–∞–ª–∏ –æ –ú–∞—Å—Ç–æ–¥–æ–Ω–µ —Ä–∞–Ω–µ–µ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—á–∏—Ç–∞—Ç—å –ø–æ—Å—Ç
    <a
      href="https://axbom.com/mastodon-tips/"
      class="underline"
      >10 quick Mastodon tips</a
    >. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞, –º–æ–∂–Ω–æ –≤—ã—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–æ–∏–º
    <a
      href="https://fosstodon.org/invite/Wg3cdmzP"
      class="underline"
      >–∏–Ω–≤–∞–π—Ç–æ–º</a
    >.
  </p>

  <section
    v-if="toots.length"
    class="mb-8"
  >
    <TootCard
      v-for="toot in toots"
      :toot="toot"
      :key="toot.id"
    />

    <div class="mt-8 flex flex-col">
      <span class="block text-center">–û–≥–æ, –≤—ã –¥–æ–ª–∏—Å—Ç–∞–ª–∏ –ª–µ–Ω—Ç—É –¥–æ –∫–æ–Ω—Ü–∞ üò≥ ?..</span>
      <span class="block text-center">–≠—Ç–æ –±—ã–ª–∏ —Ç–æ–ª—å–∫–æ –¥–≤–∞–¥—Ü–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å—Ç–æ–≤!</span>
      <span class="block text-center"
        >–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å—ë —Ü–µ–ª–∏–∫–æ–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞
        <a
          href="https://fosstodon.org/@hazadus"
          class="underline"
          >https://fosstodon.org/@hazadus</a
        >.</span
      >
    </div>
  </section>
  <section
    v-else
    class="w-100 h-96 flex justify-center items-center"
  >
    <SpinnerIndicator />
  </section>
</template>
